# Скрипт для миграции одной виртуальной машины между SDN.

[migrator.sh](../migrator.sh)

#### Подготовительные действия.

**ВАЖНО!** Перед выполнением скрипта убедиться, что **ВМ активна**, а сеть и подсеть в SDN Sprut с повторяющейся адресацией по отношению к сети и подсети Neutron созданы.

**ВАЖНО!** Скрипт позволяет выполнить миграцию порта ВМ с сохранением MAC / IP адресов или без сохранения. Управление данным функционалом вынесено в параметр запуска скрипта.

```bash
./migrator.sh --opt <clone/noclone>
```

> где в качестве значения следует использовать одну из 2х опций:

> - clone (миграция с сохранением информации о MAC / IP адресах)
> - noclone (миграция с назначением случайных MAC / IP адресов из целевой сети / подсети)

Перед запуском скрипта фиксируем основные значения:
1. логическое имя сервера
1. сеть назначения в SDN Sprut
1. подсеть назначения в SDN Sprut

Примечание. При запуске сценария консоль будет ожидать ввода от пользователя. Заполняем "анкету" и запускаем миграцию порта.

#### Пост-миграционные шаги

ВАЖНО! На уровне ОС следует выполнить опрос DHCP сервера для получения IP адреса на вновь добавленный сетевой интерфейс.

Для Windows:

```
ipconfig /release
ipconfig /renew
```

Для Lunix:
```bash
dhclient
```

